{
  "id": "/letsencrypt-dcos",
  "cpus": 0.05,
  "mem": 64,
  "instances": 1,
  "container": {
    "type": "DOCKER",
    "volumes": [
      {
        "containerPath": "/etc/letsencrypt",
        "hostPath": "data",
        "mode": "RW"
      },
      {
        "containerPath": "data",
        "mode": "RW",
        "persistent": {
          "size": 500
        }
      }
    ],
    "docker": {
      "image": "mesosphere/letsencrypt-dcos:v1.0.2",
      "network": "BRIDGE",
      "portMappings": [
        {
          "containerPort": 80,
          "servicePort": 10000,
          "protocol": "tcp"
        }
      ]
    }
  },
  "env": {
    "MARATHON_LB_ID": "marathon-lb",
    "MARATHON_URL": "http://marathon.mesos:8080",
    "LETSENCRYPT_EMAIL": "blangston@cloudpassage.com",
    "SSL_DOMAINS": "api-cphalo.cphalo.com,grid-cphalo.cphalo.com,portal-cphalo.cphalo.com,outyet-cphalo.cphalo.com"
  },
  "labels": {
    "HAPROXY_0_VHOST": "api-cphalo.cphalo.com,grid-cphalo.cphalo.com,portal-cphalo.cphalo.com,outyet-cphalo.cphalo.com",
    "HAPROXY_GROUP": "external",
    "HAPROXY_0_PATH": "/.well-known/acme-challenge"
  },
  "healthChecks": [{
     "protocol": "COMMAND",
     "command": { "value": "/bin/true" },
     "gracePeriodSeconds": 300,
     "intervalSeconds": 60,
     "timeoutSeconds": 20,
     "maxConsecutiveFailures": 3
  }],
  "backoffSeconds": 5,
  "upgradeStrategy": {
    "minimumHealthCapacity": 0.5,
    "maximumOverCapacity": 0
  }
}

